const obleceni = [
  {
    typ: "Triko",
    značka: "Clever - Lídl",
    teplota: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17],
    kdo: "Tobias",
    nové: false,
    poslední_zkoušení: "neznámo",
    velikost: { velikost: "164/170" },
    obrázek: "images/triko7.png",
    teplotaPrani: "30-40",
    otacky: 800,
  },
  {
    typ: "Triko",
    značka: "PEPCO",
    teplota: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17],
    kdo: "Tobias",
    nové: false,
    poslední_zkoušení: "neznámo",
    velikost: { velikost: "164/170" },
    obrázek: "images/triko6.png",
    teplotaPrani: "30-40",
    otacky: 800,
  },
  {
    typ: "Triko",
    značka: "Lee Cooper",
    teplota: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17],
    kdo: "Tobias",
    nové: true,
    poslední_zkoušení: "14. 3. 2025",
    velikost: { velikost: "L" },
    obrázek: "images/triko5.png",
    teplotaPrani: "30-40",
    otacky: 800,
  },
  {
    typ: "Triko",
    značka: "TAKKO FASHION",
    teplota: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17],
    kdo: "Tobias",
    nové: true,
    poslední_zkoušení: "14. 3. 2025",
    velikost: { velikost: "S" },
    obrázek: "images/triko4.png",
    teplotaPrani: "30-40",
    otacky: 800,
  },
  {
    typ: "Triko",
    značka: "PEPCO",
    teplota: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17],
    kdo: "Tobias",
    nové: false,
    poslední_zkoušení: "neznámo",
    velikost: { velikost: "164/170" },
    obrázek: "images/triko3.png",
    teplotaPrani: "30-40",
    otacky: 800,
  },
  {
    typ: "Triko",
    značka: "PEPCO",
    teplota: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17],
    kdo: "Tobias",
    nové: false,
    poslední_zkoušení: "neznámo",
    velikost: { velikost: "164/170" },
    obrázek: "images/triko2.png",
    teplotaPrani: "30-40",
    otacky: 800,
  },
  {
    typ: "Triko",
    značka: "PEPCO",
    teplota: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17],
    kdo: "Tobias",
    nové: false,
    poslední_zkoušení: "neznámo",
    velikost: { velikost: "164/170" },
    obrázek: "images/triko1.png",
    teplotaPrani: "30-40",
    otacky: 800,
  },
  {
    typ: "Kalhoty",
    značka: "TAKKO FASHION",
    teplota: [
      0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20,
      21, 22, 23, 24, 25,
    ],
    kdo: "Tobias",
    nové: false,
    poslední_zkoušení: "neznámo",
    velikost: { velikost: "164/170" },
    obrázek: "images/kalhoty1.png",
    teplotaPrani: "30-40",
    otacky: 800,
  },
  {
    typ: "Kalhoty",
    značka: "TAKKO FASHION",
    teplota: [
      0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20,
      21, 22, 23, 24, 25,
    ],
    kdo: "Tobias",
    nové: false,
    poslední_zkoušení: "neznámo",
    velikost: { velikost: "164/170" },
    obrázek: "images/kalhoty2.png",
    teplotaPrani: "30-40",
    otacky: 800,
  },
  {
    typ: "Kalhoty",
    značka: "C&A",
    teplota: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17],
    kdo: "Tobias",
    nové: false,
    poslední_zkoušení: "14. 3. 2025",
    velikost: { velikost: "170/176" },
    obrázek: "images/kalhoty3.png",
    teplotaPrani: "30-40",
    otacky: 800,
  },
  {
    typ: "Kalhoty",
    značka: "C&A",
    teplota: [18, 19, 20, 21, 22, 23, 24, 25],
    kdo: "Tobias",
    nové: true,
    poslední_zkoušení: "15. 3. 2025",
    velikost: { velikost: "W 30, L 32" },
    obrázek: "images/kalhoty4.png",
    teplotaPrani: "30-40",
    otacky: 800,
  },
  {
    typ: "Kalhoty",
    značka: "Reserved",
    teplota: [18, 19, 20, 21, 22, 23, 24, 25],
    kdo: "Tobias",
    nové: true,
    poslední_zkoušení: "15. 3. 2025",
    velikost: { velikost: "S" },
    obrázek: "images/kalhoty5.png",
    teplotaPrani: "30-40",
    otacky: 800,
  },
  {
    typ: "Triko",
    značka: "Reserved",
    teplota: [
      18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35,
      36, 37, 38, 39, 40,
    ],
    kdo: "Tobias",
    nové: true,
    poslední_zkoušení: "15. 3. 2025",
    velikost: { velikost: "S" },
    obrázek: "images/triko8.png",
    teplotaPrani: "30-40",
    otacky: 800,
  },
  {
    typ: "Triko",
    značka: "Reserved",
    teplota: [
      18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35,
      36, 37, 38, 39, 40,
    ],
    kdo: "Tobias",
    nové: true,
    poslední_zkoušení: "15. 3. 2025",
    velikost: { velikost: "S" },
    obrázek: "images/triko9.png",
    teplotaPrani: "30-40",
    otacky: 800,
  },
  {
    typ: "Triko",
    značka: "Reserved",
    teplota: [
      18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35,
      36, 37, 38, 39, 40,
    ],
    kdo: "Tobias",
    nové: true,
    poslední_zkoušení: "15. 3. 2025",
    velikost: { velikost: "S" },
    obrázek: "images/triko11.png",
    teplotaPrani: "30-40",
    otacky: 800,
  },
  {
    typ: "Triko",
    značka: "Reserved",
    teplota: [
      18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35,
      36, 37, 38, 39, 40,
    ],
    kdo: "Tobias",
    nové: true,
    poslední_zkoušení: "15. 3. 2025",
    velikost: { velikost: "S" },
    obrázek: "images/triko12.png",
    teplotaPrani: "30-40",
    otacky: 800,
  },
  {
    typ: "Triko",
    značka: "Reserved",
    teplota: [
      18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35,
      36, 37, 38, 39, 40,
    ],
    kdo: "Tobias",
    nové: true,
    poslední_zkoušení: "15. 3. 2025",
    velikost: { velikost: "S" },
    obrázek: "images/triko13.png",
    teplotaPrani: "30-40",
    otacky: 800,
  },
  {
    typ: "Triko",
    značka: "C&A",
    teplota: [
      18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35,
      36, 37, 38, 39, 40,
    ],
    kdo: "Tobias",
    nové: true,
    poslední_zkoušení: "15. 3. 2025",
    velikost: { velikost: "S" },
    obrázek: "images/triko14.png",
    teplotaPrani: "30-40",
    otacky: 800,
  },
  {
    typ: "Svetr",
    značka: "C&A",
    teplota: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16],
    kdo: "Tobias",
    nové: true,
    poslední_zkoušení: "15. 3. 2025",
    velikost: { velikost: "S" },
    obrázek: "images/svetr1.png",
    teplotaPrani: "30-40",
    otacky: 800,
  },
  {
    typ: "Triko",
    značka: "CDRL S.A.",
    teplota: [
      18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35,
      36, 37, 38, 39, 40,
    ],
    kdo: "Tobias",
    nové: false,
    poslední_zkoušení: "neznámo",
    velikost: { velikost: "164/170" },
    obrázek: "images/triko15.jpg",
    teplotaPrani: "30-40",
    otacky: 800,
  },
  {
    typ: "Triko",
    značka: "CDRL S.A.",
    teplota: [
      18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35,
      36, 37, 38, 39, 40,
    ],
    kdo: "Marcus",
    nové: false,
    poslední_zkoušení: "neznámo",
    velikost: { velikost: "158/164" },
    obrázek: "images/triko16.jpg",
    teplotaPrani: "30-40",
    otacky: 800,
  },
  {
    typ: "Triko",
    značka: "H&M",
    teplota: [
      18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35,
      36, 37, 38, 39, 40,
    ],
    kdo: "Marcus",
    nové: false,
    poslední_zkoušení: "neznámo",
    velikost: { velikost: "158/164" },
    obrázek: "images/triko17.jpg",
    teplotaPrani: "30-40",
    otacky: 800,
  },
  {
    typ: "Triko",
    značka: "PEPCO",
    teplota: [
      18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35,
      36, 37, 38, 39, 40,
    ],
    kdo: "Marcus",
    nové: false,
    poslední_zkoušení: "neznámo",
    velikost: { velikost: "158/164" },
    obrázek: "images/triko18.jpg",
    teplotaPrani: "30-40",
    otacky: 800,
  },
  {
    typ: "Triko",
    značka: "H&M",
    teplota: [
      18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35,
      36, 37, 38, 39, 40,
    ],
    kdo: "Tobias",
    nové: false,
    poslední_zkoušení: "neznámo",
    velikost: { velikost: "164/170" },
    obrázek: "images/triko19.jpg",
    teplotaPrani: "30-40",
    otacky: 800,
  },
  {
    typ: "Triko",
    značka: "CDRL S.A.",
    teplota: [
      18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35,
      36, 37, 38, 39, 40,
    ],
    kdo: "Marcus",
    nové: false,
    poslední_zkoušení: "neznámo",
    velikost: { velikost: "158/164" },
    obrázek: "images/triko20.jpg",
    teplotaPrani: "30-40",
    otacky: 800,
  },
  {
    typ: "Triko",
    značka: "CLDR S.A.",
    teplota: [
      18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35,
      36, 37, 38, 39, 40,
    ],
    kdo: "Marcus",
    nové: false,
    poslední_zkoušení: "neznámo",
    velikost: { velikost: "158/164" },
    obrázek: "images/triko21.jpg",
    teplotaPrani: "30-40",
    otacky: 800,
  },
  {
    typ: "Triko",
    značka: "H&M",
    teplota: [
      18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35,
      36, 37, 38, 39, 40,
    ],
    kdo: "Tobias",
    nové: false,
    poslední_zkoušení: "neznámo",
    velikost: { velikost: "164/170" },
    obrázek: "images/triko22.jpg",
    teplotaPrani: "30-40",
    otacky: 800,
  },
  {
    typ: "Triko",
    značka: "PEPCO",
    teplota: [
      18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35,
      36, 37, 38, 39, 40,
    ],
    kdo: "Marcus",
    nové: false,
    poslední_zkoušení: "neznámo",
    velikost: { velikost: "158/164" },
    obrázek: "images/triko23.jpg",
    teplotaPrani: "30-40",
    otacky: 800,
  },
  {
    typ: "Triko",
    značka: "H&M",
    teplota: [
      18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35,
      36, 37, 38, 39, 40,
    ],
    kdo: "Tobias",
    nové: false,
    poslední_zkoušení: "neznámo",
    velikost: { velikost: "164/170" },
    obrázek: "images/triko24.jpg",
    teplotaPrani: "30-40",
    otacky: 800,
  },
  {
    typ: "Triko",
    značka: "CDRL S.A.",
    teplota: [
      18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35,
      36, 37, 38, 39, 40,
    ],
    kdo: "Marcus",
    nové: false,
    poslední_zkoušení: "neznámo",
    velikost: { velikost: "158/164" },
    obrázek: "images/triko25.jpg",
    teplotaPrani: "30-40",
    otacky: 800,
  },
  {
    typ: "Triko",
    značka: "CDRL S.A.",
    teplota: [
      18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35,
      36, 37, 38, 39, 40,
    ],
    kdo: "Marcus",
    nové: false,
    poslední_zkoušení: "neznámo",
    velikost: { velikost: "158/164" },
    obrázek: "images/triko26.jpg",
    teplotaPrani: "30-40",
    otacky: 800,
  },
  {
    typ: "Triko",
    značka: "JHK",
    teplota: [
      18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35,
      36, 37, 38, 39, 40,
    ],
    kdo: "Tobias",
    nové: false,
    poslední_zkoušení: "15. 3. 2025",
    velikost: { velikost: "S" },
    obrázek: "images/triko27.jpg",
    teplotaPrani: "30-40",
    otacky: 800,
  },
  {
    typ: "Triko",
    značka: "PEPCO",
    teplota: [
      18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35,
      36, 37, 38, 39, 40,
    ],
    kdo: "Marcus",
    nové: false,
    poslední_zkoušení: "neznámo",
    velikost: { velikost: "158/164" },
    obrázek: "images/triko28.jpg",
    teplotaPrani: "30-40",
    otacky: 800,
  },
  {
    typ: "Triko",
    značka: "PEPCO",
    teplota: [
      18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35,
      36, 37, 38, 39, 40,
    ],
    kdo: "Marcus",
    nové: false,
    poslední_zkoušení: "neznámo",
    velikost: { velikost: "158/164" },
    obrázek: "images/triko29.jpg",
    teplotaPrani: "30-40",
    otacky: 800,
  },
];

function resetujFiltry() {
  const filtry = document.getElementById("filter-teplota");
  if (!filtry) return;

  document.getElementById("filter-teplota").value = "";
  document.getElementById("filter-znacka").value = "";
  document.getElementById("filter-nove").checked = false;
  document.getElementById("filter-kdo").value = "";
  document.getElementById("filter-velikost").value = "";
  document.getElementById("filter-typ").value = "";
  document.getElementById("filter-prani").value = "";
  document.getElementById("filter-prani").value = "";
  document.getElementById("filter-otacky").value = "";
  zobrazObleceni(obleceni);
}

function aplikujFiltr() {
  const teplotaElement = document.getElementById("filter-teplota");
  const znackaElement = document.getElementById("filter-znacka");
  const noveElement = document.getElementById("filter-nove");
  const kdoElement = document.getElementById("filter-kdo");
  const velikostElement = document.getElementById("filter-velikost");
  const typElement = document.getElementById("filter-typ");
  const teplotaPraniElement = document.getElementById("filter-prani");
  const otackyElement = document.getElementById("filter-otacky");

  if (
    !teplotaElement ||
    !znackaElement ||
    !noveElement ||
    !kdoElement ||
    !velikostElement ||
    !typElement ||
    !teplotaPraniElement ||
    !otackyElement
  ) {
    return;
  }

  const teplota = parseInt(teplotaElement.value);
  const znacka = znackaElement.value;
  const nove = noveElement.checked;
  const kdo = kdoElement.value;
  const velikost = velikostElement.value;
  const typ = typElement.value;
  const teplotaPrani = teplotaPraniElement.value;
  const otacky = parseInt(otackyElement.value);

  const filtrovaneObleceni = obleceni.filter((item) => {
    if (teplota && !item.teplota.includes(teplota)) return false;
    if (
      znacka &&
      item.značka.toLowerCase().replace(/\s+/g, "") !==
        znacka.toLowerCase().replace(/\s+/g, "")
    )
      return false;
    if (nove && !item.nové) return false;
    if (kdo && item.kdo !== kdo) return false;
    if (teplotaPrani && item.teplotaPrani !== teplotaPrani) return false;
    if (otacky && item.otacky !== parseInt(otacky)) return false;
    if (velikost) {
      let maVelikost = false;
      for (let znacka in item.velikost) {
        if (item.velikost[znacka] === velikost) {
          maVelikost = true;
          break;
        }
      }
      if (!maVelikost) return false;
    }
    if (typ && item.typ !== typ) return false;
    return true;
  });

  zobrazObleceni(filtrovaneObleceni);
}

function zobrazObleceni(items) {
  const container = document.getElementById("seznam-obleceni");
  if (!container) return;

  container.innerHTML = "";

  items.forEach((item) => {
    const div = document.createElement("div");
    div.className = "obleceni-item";

    const velikostTexty = Object.entries(item.velikost)
      .map(([znacka, vel]) => `${znacka}: ${vel}`)
      .join(", ");

    const teplotaRozmezi = `${Math.min(...item.teplota)}-${Math.max(...item.teplota)}`;

    div.innerHTML = `
             <img src="${item.obrázek}" alt="${item.typ}">
             <h3>${item.typ}</h3>
             <span class="label label-znacka">${item.značka}</span>
             <span class="label label-teplota">${teplotaRozmezi}°C</span>
             <span class="label label-kdo">${item.kdo}</span>
             <span class="label label-velikost">${velikostTexty}</span>
             <span class="label label-zkouseni">Zkoušeno: ${item.poslední_zkoušení}</span>
             <span class="label label-prani">Praní: ${item.teplotaPrani}°C / ${item.otacky} ot.</span>
             ${item.nové ? '<span class="label label-nove">Nové</span>' : ""}
         `;

    container.appendChild(div);
  });
}

// Inicializace při načtení stránky
window.onload = function () {
  const uniqueTypes = [...new Set(obleceni.map((item) => item.typ))];
  const uniqueBrands = [...new Set(obleceni.map((item) => item.značka))];
  const uniquePeople = [...new Set(obleceni.map((item) => item.kdo))];
  const uniqueSizes = [
    ...new Set(obleceni.map((item) => item.velikost.velikost)),
  ];
  const uniqueTempRanges = ["30-40", "40-50", "50-60", "60-70"];
  const uniqueSpins = [600, 800, 1000];

  const typSelect = document.getElementById("filter-typ");
  const znackaSelect = document.getElementById("filter-znacka");
  const kdoSelect = document.getElementById("filter-kdo");
  const velikostSelect = document.getElementById("filter-velikost");
  const teplotaPraniSelect = document.getElementById("filter-prani");
  const otackySelect = document.getElementById("filter-otacky");

  if (typSelect) {
    typSelect.innerHTML =
      '<option value="">Všechny</option>' +
      uniqueTypes
        .map((typ) => `<option value="${typ}">${typ}</option>`)
        .join("");
  }

  if (znackaSelect) {
    znackaSelect.innerHTML =
      '<option value="">Všechny</option>' +
      uniqueBrands
        .map((znacka) => `<option value="${znacka}">${znacka}</option>`)
        .join("");
  }

  if (kdoSelect) {
    kdoSelect.innerHTML =
      '<option value="">Všechny</option>' +
      uniquePeople
        .map((kdo) => `<option value="${kdo}">${kdo}</option>`)
        .join("");
  }

  if (velikostSelect) {
    velikostSelect.innerHTML =
      '<option value="">Všechny</option>' +
      uniqueSizes
        .map((velikost) => `<option value="${velikost}">${velikost}</option>`)
        .join("");
  }

  if (teplotaPraniSelect) {
    teplotaPraniSelect.innerHTML =
      '<option value="">Všechny</option>' +
      uniqueTempRanges
        .map((temp) => `<option value="${temp}">${temp}</option>`)
        .join("");
  }

  if (otackySelect) {
    otackySelect.innerHTML =
      '<option value="">Všechny</option>' +
      uniqueSpins
        .map((otacky) => `<option value="${otacky}">${otacky}</option>`)
        .join("");
  }

  zobrazObleceni(obleceni);
};
