<!DOCTYPE html>
<html lang="cs">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vaše zpětná vazba - Tobikovo</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/footer.css">
    <link rel="stylesheet" href="css/nav.css">
    <link rel="stylesheet" href="css/grid.css">
    <style>
        .opinion-input {
            width: 100%;
            width: 20rem;
            padding: 0.5rem;
            border-radius: 10px;
            border: 2px solid #35393f;
            background-color: #35393f;
            color: white;
            margin-bottom: 1rem;
        }

        .opinion-input:focus,
        textarea:focus {
            border: 2px solid white;
            outline: none;
        }

        button {
            margin: 0.5rem;
        }

        .opinions-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1rem;
            margin-top: 2rem;
        }

        .opinion-card {
            background-color: #25292e;
            border-radius: 8px;
            padding: 1rem;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
            position: relative;
        }

        .opinion-card:hover {
            transform: translateY(-2px);
        }

        .opinion-meta {
            display: flex;
            justify-content: space-between;
            color: #9c9c9c;
            font-size: 0.875rem;
        }
    </style>
</head>

<body>
    <div class="loading-bar-container">
        <div class="loading-bar"></div>
    </div>
    <nav id="myNavbar">
        <a href="#home"><img src="images/white-logo.png" alt="Logo" width="75px"></a>
        <a href="#home">Domů</a>
        <a href="#ucivo">Učivo</a>
        <a href="#o-nas">O nás</a>
    </nav>
    <button class="openNav opennav-button" onclick="openNav()">☰</button>
    <!-- Obsah stránky -->
    <main>
        <h1 class="verybig">Vaše zpětná vazba</h1>

        <section>
            <div style="text-align: left;">
                <h2>Přidat</h2>
                <p>Napište nám svou zpětnou vazbu:</p>
                <div>
                    <input type="text" id="author-input" class="opinion-input" placeholder="Vaše jméno">
                    <textarea id="text-input" placeholder="Zde napište svou zpětnou vazbu"></textarea>
                    <div style="text-align: center;">
                        <button class="submit-button" onclick="addOpinion()">Přidat
                            zpětnou vazbu</button>
                    </div>
                </div>

                <h2>Zpětná vazba ostatních</h2>
                <p><em>Poznámka #1: Tato verze stránky neumožňuje ukládat zpětnou vazbu, již je ale vyvynut Blazor, kde
                        to
                        funguje. Zatím jsou ale zpětné vazby pouze jako doplnění funkcí mezi Blazorem a touto verzí. Teď
                        se tyto názory jen uloží do LocalStorage.</em>
                <p><em>Poznámka #2: Pokud ale přesto budete chtít mi napsat, mužete využit e-mail <a
                            href="mailto:henematobik213@gmail.com?subject=Pomoc pro Tobikovo">zde</a>.</em></p>
                </p>
                <span style="color: #9c9c9c"><em>od nejnovějšího k nejstaršímu</em></span>
                <div class="opinions-container" id="opinions-container">
                    <!-- Názory se načítají sem -->
                </div>
            </div>
        </section>

    </main>
    <!-- Patička -->
    <footer>
        <div class="footer-content">
            <a href="about.html"><img src="images/white-logo.png" alt="Tobikovo Logo" width="100px"></a>
        </div>
    </footer>

    <script>
        const opinionsContainer = document.getElementById('opinions-container');

        // Načtení názorů z LocalStorage
        const loadOpinions = () => {
            const opinions = JSON.parse(localStorage.getItem('opinions')) || [];
            opinionsContainer.innerHTML = ''; // Vyčištění kontejneru
            opinions.reverse().forEach(renderOpinion);
        };

        // Uložení názorů do LocalStorage
        const saveOpinions = (opinions) => {
            localStorage.setItem('opinions', JSON.stringify(opinions));
        };

        // Přidání názoru
        const addOpinion = () => {
            const author = document.getElementById('author-input').value.trim();
            const text = document.getElementById('text-input').value.trim();

            if (!author || !text) {
                alert('Prosím vyplňte všechny údaje.');
                return;
            }

            const newOpinion = {
                author,
                text,
                date: new Date().toLocaleDateString()
            };

            const opinions = JSON.parse(localStorage.getItem('opinions')) || [];
            opinions.push(newOpinion);
            saveOpinions(opinions);

            document.getElementById('author-input').value = '';
            document.getElementById('text-input').value = '';

            loadOpinions();
        };

        // Vykreslení jednoho názoru
        const renderOpinion = (opinion) => {
            const card = document.createElement('div');
            card.classList.add('opinion-card');

            card.innerHTML = `
                <p>${opinion.text}</p>
                <div class="opinion-meta">
                    <span>${opinion.date}</span>
                    <span>${opinion.author}</span>
                </div>
            `;

            opinionsContainer.appendChild(card);
        };

        // Načtení názorů při načtení stránky
        window.onload = loadOpinions;
    </script>
    <script src="javastripts/nav.js"></script>
</body>

</html>